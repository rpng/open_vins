<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ov_msckf::RosVisualizer class | OpenVINS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600&amp;subset=latin-ext" />
  <link rel="stylesheet" href="m-udel+documentation.compiled.css" />
  <link rel="stylesheet" href="custom.css" />
  <link rel="icon" href="favicon-light.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2f73a3" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">OpenVINS</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaceov__core.html">ov_core</a></li>
            <li><a href="namespaceov__type.html">ov_type</a></li>
            <li><a href="namespaceov__msckf.html">ov_msckf</a></li>
            <li><a href="namespaceov__eval.html">ov_eval</a></li>
            <li><a href="annotated.html">Classes</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="7">
            <li><a href="https://github.com/rpng/open_vins/">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceov__msckf.html">ov_msckf</a>::<wbr/></span>RosVisualizer <span class="m-thin">class</span>
        </h1>
        <p>Helper class that will publish results onto the ROS framework.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
                <li><a href="#pro-attribs">Protected variables</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Also save to file the current total state and covariance along with the groundtruth if we are simulating. We visualize the following things:</p><ul><li><a href="classov__msckf_1_1State.html" class="m-doc">State</a> of the system on TF, pose message, and path</li><li>Image of our tracker</li><li>Our different features (SLAM, MSCKF, ARUCO)</li><li>Groundtruth trajectory if we have it</li></ul>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#aa40cf3af0e9f5571b386bac7780fe5b7" class="m-doc">RosVisualizer</a>(</span><span class="m-doc-wrap">ros::NodeHandle&amp; nh,
              <a href="classov__msckf_1_1VioManager.html" class="m-doc">VioManager</a>* app,
              <a href="classov__msckf_1_1Simulator.html" class="m-doc">Simulator</a>* sim = nullptr)</span>
            </dt>
            <dd>Default constructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt id="a5ba7b560b00d0a312378b4fcf6101321">
              <span class="m-doc-wrap-bumper">void <a href="#a5ba7b560b00d0a312378b4fcf6101321" class="m-doc-self">visualize</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Will visualize the system if we have new things.</dd>
            <dt id="ac18c4d5638c9b21740fa5246fb57b7aa">
              <span class="m-doc-wrap-bumper">void <a href="#ac18c4d5638c9b21740fa5246fb57b7aa" class="m-doc-self">visualize_odometry</a>(</span><span class="m-doc-wrap">double timestamp)</span>
            </dt>
            <dd>Will publish our odometry message for the current timestep. This will take the current state estimate and get the propagated pose to the desired time. This can be used to get pose estimates on systems which require high frequency pose estimates.</dd>
            <dt id="af7742f2e349e47b948b18b8426c7b39d">
              <span class="m-doc-wrap-bumper">void <a href="#af7742f2e349e47b948b18b8426c7b39d" class="m-doc-self">visualize_final</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>After the run has ended, print results.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt id="a630ce450fc6acb528b248af5e4e5735d">
              <span class="m-doc-wrap-bumper">void <a href="#a630ce450fc6acb528b248af5e4e5735d" class="m-doc-self">publish_state</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Publish the current state.</dd>
            <dt id="aefe2ba58c19ca3d89e8e5fcd2fd42909">
              <span class="m-doc-wrap-bumper">void <a href="#aefe2ba58c19ca3d89e8e5fcd2fd42909" class="m-doc-self">publish_images</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Publish the active tracking image.</dd>
            <dt id="a6773e7c1953f6c21551a8ee078559cb2">
              <span class="m-doc-wrap-bumper">void <a href="#a6773e7c1953f6c21551a8ee078559cb2" class="m-doc-self">publish_features</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Publish current features.</dd>
            <dt id="a97757b4dd59f20fb28487c1a4d0dc233">
              <span class="m-doc-wrap-bumper">void <a href="#a97757b4dd59f20fb28487c1a4d0dc233" class="m-doc-self">publish_groundtruth</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Publish groundtruth (if we have it)</dd>
            <dt id="ad3814d8af814776ff497a238ba997fbc">
              <span class="m-doc-wrap-bumper">void <a href="#ad3814d8af814776ff497a238ba997fbc" class="m-doc-self">publish_keyframe_information</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Publish keyframe information of the marginalized pose and tracks.</dd>
            <dt id="a0f031981480cafe4833d6ab4d6da46a4">
              <span class="m-doc-wrap-bumper">void <a href="#a0f031981480cafe4833d6ab4d6da46a4" class="m-doc-self">sim_save_total_state_to_file</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Save current estimate state and groundtruth including calibration.</dd>
          </dl>
        </section>
        <section id="pro-attribs">
          <h2><a href="#pro-attribs">Protected variables</a></h2>
          <dl class="m-doc">
            <dt id="a9abb516f8c8ef4ae1239911d68ab1d77">
              ros::NodeHandle <a href="#a9abb516f8c8ef4ae1239911d68ab1d77" class="m-doc-self">_nh</a>
            </dt>
            <dd>ROS node handle that we publish onto.</dd>
            <dt id="a8d8b61c5c6606f97b6b716ec4a93d3bb">
              <a href="classov__msckf_1_1VioManager.html" class="m-doc">VioManager</a>* <a href="#a8d8b61c5c6606f97b6b716ec4a93d3bb" class="m-doc-self">_app</a>
            </dt>
            <dd>Core application of the filter system.</dd>
            <dt id="a730d5ac5c353b535dc374a1f9d3d4911">
              <a href="classov__msckf_1_1Simulator.html" class="m-doc">Simulator</a>* <a href="#a730d5ac5c353b535dc374a1f9d3d4911" class="m-doc-self">_sim</a>
            </dt>
            <dd><a href="classov__msckf_1_1Simulator.html" class="m-doc">Simulator</a> (is nullptr if we are not sim&#x27;ing)</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="aa40cf3af0e9f5571b386bac7780fe5b7"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> ov_msckf::<wbr />RosVisualizer::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aa40cf3af0e9f5571b386bac7780fe5b7" class="m-doc-self">RosVisualizer</a>(</span><span class="m-doc-wrap">ros::NodeHandle&amp; nh,
              <a href="classov__msckf_1_1VioManager.html" class="m-doc">VioManager</a>* app,
              <a href="classov__msckf_1_1Simulator.html" class="m-doc">Simulator</a>* sim = nullptr)</span></span>
            </h3>
            <p>Default constructor.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">nh</td>
                  <td>ROS node handler</td>
                </tr>
                <tr>
                  <td>app</td>
                  <td>Core estimator manager</td>
                </tr>
                <tr>
                  <td>sim</td>
                  <td><a href="classov__msckf_1_1Simulator.html" class="m-doc">Simulator</a> if we are simulating</td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Generated by <a href="https://doxygen.org/">Doxygen</a> 1.8.19 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
