<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ov_msckf::StateHelper class | OpenVINS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600&amp;subset=latin-ext" />
  <link rel="stylesheet" href="m-udel+documentation.compiled.css" />
  <link rel="stylesheet" href="custom.css" />
  <link rel="icon" href="favicon-light.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2f73a3" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">OpenVINS</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="namespaceov__core.html">ov_core</a></li>
            <li><a href="namespaceov__type.html">ov_type</a></li>
            <li><a href="namespaceov__msckf.html">ov_msckf</a></li>
            <li><a href="namespaceov__init.html">ov_init</a></li>
            <li><a href="namespaceov__eval.html">ov_eval</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="8">
            <li><a href="https://github.com/rpng/open_vins/">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceov__msckf.html">ov_msckf</a>::<wbr/></span>StateHelper <span class="m-thin">class</span>
        </h1>
        <p>Helper which manipulates the <a href="classov__msckf_1_1State.html" class="m-doc">State</a> and its covariance.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-static-methods">Public static functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>In general, this class has all the core logic for an Extended Kalman Filter (EKF)-based system. This has all functions that change the covariance along with addition and removing elements from the state. All functions here are static, and thus are self-contained so that in the future multiple states could be tracked and updated. We recommend you look directly at the code for this class for clarity on what exactly we are doing in each and the matching documentation pages.</p>
        <section id="pub-static-methods">
          <h2><a href="#pub-static-methods">Public static functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a31f92fdf5bac87bfc23d34334af7bd4d" class="m-doc">EKFPropagation</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; order_NEW,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; order_OLD,
              const Eigen::MatrixXd&amp; Phi,
              const Eigen::MatrixXd&amp; Q)</span>
            </dt>
            <dd>Performs EKF propagation of the state covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a471d81fcc22b706654556950931067fd" class="m-doc">EKFUpdate</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H,
              const Eigen::VectorXd&amp; res,
              const Eigen::MatrixXd&amp; R)</span>
            </dt>
            <dd>Performs EKF update of the state (see <a href="update.html#linear-meas" class="m-doc">Linear Measurement Update</a> page)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a5f19646a05e77e67d5be2da8aed19f14" class="m-doc">set_initial_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const Eigen::MatrixXd&amp; covariance,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; order)</span>
            </dt>
            <dd>This will set the initial covaraince of the specified state elements. Will also ensure that proper cross-covariances are inserted.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a23ec77c8411dcc7cfed64273f6882805" class="m-doc">get_marginal_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; small_variables) -&gt; Eigen::MatrixXd</span>
            </dt>
            <dd>For a given set of variables, this will this will calculate a smaller covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a2ac98543816e664cd85e4fa61bd165b7" class="m-doc">get_full_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state) -&gt; Eigen::MatrixXd</span>
            </dt>
            <dd>This gets the full covariance matrix.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a7a6d020115f02fe783ced90b90c32287" class="m-doc">marginalize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; marg)</span>
            </dt>
            <dd>Marginalizes a variable, properly modifying the ordering/covariances in the state.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a3aecb942a1d9bb7dec915fdad303acc8" class="m-doc">clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; variable_to_clone) -&gt; std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;</span>
            </dt>
            <dd>Clones &quot;variable to clone&quot; and places it at end of covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a58ed364529ae3802a7110edf3ac4dbbb" class="m-doc">initialize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; H_order,
              Eigen::MatrixXd&amp; H_R,
              Eigen::MatrixXd&amp; H_L,
              Eigen::MatrixXd&amp; R,
              Eigen::VectorXd&amp; res,
              double chi_2_mult) -&gt; bool</span>
            </dt>
            <dd>Initializes new variable into covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#adb0f34932bb91d89bfd5ae72c2e693d8" class="m-doc">initialize_invertible</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H_R,
              const Eigen::MatrixXd&amp; H_L,
              const Eigen::MatrixXd&amp; R,
              const Eigen::VectorXd&amp; res)</span>
            </dt>
            <dd>Initializes new variable into covariance (H_L must be invertible)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#ade3a86a89f15cc6e03a6430fd1dee694" class="m-doc">augment_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              Eigen::Matrix&lt;double, 3, 1&gt; last_w)</span>
            </dt>
            <dd>Augment the state with a stochastic copy of the current IMU pose.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a18f86e6da0bf5e7d4879f8c2f1460a27" class="m-doc">marginalize_old_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span>
            </dt>
            <dd>Remove the oldest clone, if we have more then the max clone count!!</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a54f8517a288b9362f29481f650f4b959" class="m-doc">marginalize_slam</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span>
            </dt>
            <dd>Marginalize bad SLAM features.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a31f92fdf5bac87bfc23d34334af7bd4d"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a31f92fdf5bac87bfc23d34334af7bd4d" class="m-doc-self">EKFPropagation</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; order_NEW,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; order_OLD,
              const Eigen::MatrixXd&amp; Phi,
              const Eigen::MatrixXd&amp; Q)</span></span>
            </h3>
            <p>Performs EKF propagation of the state covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>order_NEW</td>
                  <td>Contiguous variables that have evolved according to this state transition</td>
                </tr>
                <tr>
                  <td>order_OLD</td>
                  <td>Variable ordering used in the state transition</td>
                </tr>
                <tr>
                  <td>Phi</td>
                  <td><a href="classov__msckf_1_1State.html" class="m-doc">State</a> transition matrix (size order_NEW by size order_OLD)</td>
                </tr>
                <tr>
                  <td>Q</td>
                  <td>Additive state propagation noise matrix (size order_NEW by size order_NEW)</td>
                </tr>
              </tbody>
            </table>
<p>The mean of the state should already have been propagated, thus just moves the covariance forward in time. The new states that we are propagating the old covariance into, should be <strong>contiguous</strong> in memory. The user only needs to specify the sub-variables that this block is a function of.</p><div class="m-math"><svg style="width: 15.679em; height: 4.483em;" viewBox="119.012094 -43.188226 150.518791 43.039028">
<title>
\[ \tilde{\mathbf{x}}&#x27; = \begin{bmatrix} \boldsymbol\Phi_1 &amp; \boldsymbol\Phi_2 &amp; \boldsymbol\Phi_3 \end{bmatrix} \begin{bmatrix} \tilde{\mathbf{x}}_1 \\ \tilde{\mathbf{x}}_2 \\ \tilde{\mathbf{x}}_3 \end{bmatrix} + \mathbf{n} \]
</title>
<defs>
<path id='eq1-g3-49' d='M2.502615-5.076961C2.502615-5.292154 2.486675-5.300125 2.271482-5.300125C1.944707-4.98132 1.522291-4.790037 .765131-4.790037V-4.527024C.980324-4.527024 1.41071-4.527024 1.872976-4.742217V-.653549C1.872976-.358655 1.849066-.263014 1.091905-.263014H.812951V0C1.139726-.02391 1.825156-.02391 2.183811-.02391S3.235866-.02391 3.56264 0V-.263014H3.283686C2.526526-.263014 2.502615-.358655 2.502615-.653549V-5.076961Z'/>
<path id='eq1-g3-50' d='M2.247572-1.625903C2.375093-1.745455 2.709838-2.008468 2.83736-2.12005C3.331507-2.574346 3.801743-3.012702 3.801743-3.737983C3.801743-4.686426 3.004732-5.300125 2.008468-5.300125C1.052055-5.300125 .422416-4.574844 .422416-3.865504C.422416-3.474969 .73325-3.419178 .844832-3.419178C1.012204-3.419178 1.259278-3.53873 1.259278-3.841594C1.259278-4.25604 .860772-4.25604 .765131-4.25604C.996264-4.837858 1.530262-5.037111 1.920797-5.037111C2.662017-5.037111 3.044583-4.407472 3.044583-3.737983C3.044583-2.909091 2.462765-2.303362 1.522291-1.338979L.518057-.302864C.422416-.215193 .422416-.199253 .422416 0H3.57061L3.801743-1.42665H3.55467C3.53076-1.267248 3.466999-.868742 3.371357-.71731C3.323537-.653549 2.717808-.653549 2.590286-.653549H1.171606L2.247572-1.625903Z'/>
<path id='eq1-g3-51' d='M2.016438-2.662017C2.646077-2.662017 3.044583-2.199751 3.044583-1.362889C3.044583-.366625 2.478705-.071731 2.056289-.071731C1.617933-.071731 1.020174-.231133 .74122-.653549C1.028144-.653549 1.227397-.836862 1.227397-1.099875C1.227397-1.354919 1.044085-1.538232 .789041-1.538232C.573848-1.538232 .350685-1.40274 .350685-1.083935C.350685-.326775 1.163636 .167372 2.072229 .167372C3.132254 .167372 3.873474-.565878 3.873474-1.362889C3.873474-2.024408 3.347447-2.630137 2.534496-2.805479C3.164134-3.028643 3.634371-3.57061 3.634371-4.208219S2.917061-5.300125 2.088169-5.300125C1.235367-5.300125 .589788-4.837858 .589788-4.23213C.589788-3.937235 .789041-3.809714 .996264-3.809714C1.243337-3.809714 1.40274-3.985056 1.40274-4.216189C1.40274-4.511083 1.147696-4.622665 .972354-4.630635C1.307098-5.068991 1.920797-5.092902 2.064259-5.092902C2.271482-5.092902 2.87721-5.029141 2.87721-4.208219C2.87721-3.650311 2.646077-3.315567 2.534496-3.188045C2.295392-2.940971 2.11208-2.925031 1.625903-2.893151C1.474471-2.885181 1.41071-2.87721 1.41071-2.773599C1.41071-2.662017 1.482441-2.662017 1.617933-2.662017H2.016438Z'/>
<path id='eq1-g1-2' d='M2.414944 13.85604H4.710336V13.377833H2.893151V0H4.710336V-.478207H2.414944V13.85604Z'/>
<path id='eq1-g1-3' d='M2.558406 13.85604V-.478207H.263014V0H2.080199V13.377833H.263014V13.85604H2.558406Z'/>
<path id='eq1-g1-50' d='M3.897385 21.041096H4.722291V.358655H7.878456V-.466252H3.897385V21.041096Z'/>
<path id='eq1-g1-51' d='M3.239851 21.041096H4.064757V-.466252H.083686V.358655H3.239851V21.041096Z'/>
<path id='eq1-g1-52' d='M3.897385 21.029141H7.878456V20.204234H4.722291V-.478207H3.897385V21.029141Z'/>
<path id='eq1-g1-53' d='M3.239851 20.204234H.083686V21.029141H4.064757V-.478207H3.239851V20.204234Z'/>
<path id='eq1-g2-48' d='M2.11208-3.777833C2.15193-3.881445 2.183811-3.937235 2.183811-4.016936C2.183811-4.27995 1.944707-4.455293 1.721544-4.455293C1.40274-4.455293 1.315068-4.176339 1.283188-4.064757L.270984-.629639C.239103-.533998 .239103-.510087 .239103-.502117C.239103-.430386 .286924-.414446 .366625-.390535C.510087-.326775 .526027-.326775 .541968-.326775C.565878-.326775 .613699-.326775 .669489-.462267L2.11208-3.777833Z'/>
<path id='eq1-g0-8' d='M7.12528-7.687173V-8.201245C6.623163-8.177335 5.36787-8.177335 4.805978-8.177335S2.976837-8.177335 2.47472-8.201245V-7.687173H4.064757V-6.43188C1.673724-6.228643 .74122-5.116812 .74122-4.100623C.74122-3.072478 1.685679-1.972603 4.064757-1.769365V-.514072H2.47472V0C2.976837-.02391 4.23213-.02391 4.794022-.02391S6.623163-.02391 7.12528 0V-.514072H5.535243V-1.769365C8.320797-1.972603 8.954421-3.311582 8.954421-4.100623S8.320797-6.228643 5.535243-6.43188V-7.687173H7.12528ZM4.064757-2.187796C2.570361-2.391034 2.367123-3.263761 2.367123-4.100623S2.558406-5.810212 4.064757-6.01345V-2.187796ZM5.535243-6.025405C7.065504-5.846077 7.328518-5.033126 7.328518-4.100623S7.065504-2.355168 5.535243-2.175841V-6.025405Z'/>
<path id='eq1-g0-110' d='M6.348194-3.658281C6.348194-4.794022 5.858032-5.379826 4.542964-5.379826C3.682192-5.379826 2.940971-4.961395 2.534496-4.064757H2.52254V-5.379826L.502117-5.284184V-4.770112C1.243337-4.770112 1.327024-4.770112 1.327024-4.303861V-.514072H.502117V0C.777086-.02391 1.637858-.02391 1.972603-.02391S3.180075-.02391 3.455044 0V-.514072H2.630137V-3.060523C2.630137-4.351681 3.58655-4.985305 4.351681-4.985305C4.794022-4.985305 5.045081-4.698381 5.045081-3.789788V-.514072H4.220174V0C4.495143-.02391 5.355915-.02391 5.69066-.02391S6.898132-.02391 7.173101 0V-.514072H6.348194V-3.658281Z'/>
<path id='eq1-g0-120' d='M4.028892-2.952927L5.415691-4.542964C5.547198-4.698381 5.654795-4.794022 6.647073-4.794022V-5.308095C5.977584-5.284184 5.953674-5.284184 5.547198-5.284184C5.200498-5.284184 4.686426-5.284184 4.351681-5.308095V-4.794022C4.578829-4.794022 4.829888-4.734247 4.829888-4.65056C4.829888-4.62665 4.770112-4.542964 4.746202-4.519054L3.706102-3.347447L2.52254-4.794022H3.024658V-5.308095C2.749689-5.284184 1.936737-5.284184 1.613948-5.284184C1.255293-5.284184 .609714-5.284184 .274969-5.308095V-4.794022H1.123786L2.988792-2.52254L1.43462-.765131C1.291158-.597758 1.207472-.514072 .215193-.514072V0C.932503-.02391 .956413-.02391 1.327024-.02391C1.673724-.02391 2.175841-.02391 2.510585 0V-.514072C2.283437-.514072 2.032379-.573848 2.032379-.657534C2.032379-.669489 2.032379-.681445 2.116065-.777086L3.311582-2.12802L4.638605-.514072H4.136488V0C4.423412-.02391 5.224408-.02391 5.559153-.02391C5.917808-.02391 6.551432-.02391 6.886177 0V-.514072H6.049315L4.028892-2.952927Z'/>
<path id='eq1-g4-43' d='M4.770112-2.761644H8.069738C8.237111-2.761644 8.452304-2.761644 8.452304-2.976837C8.452304-3.203985 8.249066-3.203985 8.069738-3.203985H4.770112V-6.503611C4.770112-6.670984 4.770112-6.886177 4.554919-6.886177C4.327771-6.886177 4.327771-6.682939 4.327771-6.503611V-3.203985H1.028144C.860772-3.203985 .645579-3.203985 .645579-2.988792C.645579-2.761644 .848817-2.761644 1.028144-2.761644H4.327771V.537983C4.327771 .705355 4.327771 .920548 4.542964 .920548C4.770112 .920548 4.770112 .71731 4.770112 .537983V-2.761644Z'/>
<path id='eq1-g4-61' d='M8.069738-3.873474C8.237111-3.873474 8.452304-3.873474 8.452304-4.088667C8.452304-4.315816 8.249066-4.315816 8.069738-4.315816H1.028144C.860772-4.315816 .645579-4.315816 .645579-4.100623C.645579-3.873474 .848817-3.873474 1.028144-3.873474H8.069738ZM8.069738-1.649813C8.237111-1.649813 8.452304-1.649813 8.452304-1.865006C8.452304-2.092154 8.249066-2.092154 8.069738-2.092154H1.028144C.860772-2.092154 .645579-2.092154 .645579-1.876961C.645579-1.649813 .848817-1.649813 1.028144-1.649813H8.069738Z'/>
<path id='eq1-g4-126' d='M4.698381-7.938232C4.351681-7.591532 4.100623-7.352428 3.718057-7.352428C3.53873-7.352428 3.371357-7.388294 3.000747-7.639352C2.761644-7.782814 2.52254-7.938232 2.247572-7.938232C1.80523-7.938232 1.542217-7.639352 .980324-7.017684L1.147696-6.850311C1.494396-7.197011 1.745455-7.436115 2.12802-7.436115C2.307347-7.436115 2.47472-7.400249 2.84533-7.149191C3.084433-7.005729 3.323537-6.850311 3.598506-6.850311C4.040847-6.850311 4.303861-7.149191 4.865753-7.770859L4.698381-7.938232Z'/>
</defs>
<g id='eq1-page1'>
<use x='119.634789' y='-18.845938' xlink:href='#eq1-g4-126'/>
<use x='119.012094' y='-18.67992' xlink:href='#eq1-g0-120'/>
<use x='126.110475' y='-23.616106' xlink:href='#eq1-g2-48'/>
<use x='132.22638' y='-18.67992' xlink:href='#eq1-g4-61'/>
<use x='144.651861' y='-28.363683' xlink:href='#eq1-g1-2'/>
<use x='149.633196' y='-18.779598' xlink:href='#eq1-g0-8'/>
<use x='159.34677' y='-16.986335' xlink:href='#eq1-g3-49'/>
<use x='174.041725' y='-18.779598' xlink:href='#eq1-g0-8'/>
<use x='183.755299' y='-16.986335' xlink:href='#eq1-g3-50'/>
<use x='198.450254' y='-18.779598' xlink:href='#eq1-g0-8'/>
<use x='208.163828' y='-16.986335' xlink:href='#eq1-g3-51'/>
<use x='212.896143' y='-28.363683' xlink:href='#eq1-g1-3'/>
<use x='219.869976' y='-42.710031' xlink:href='#eq1-g1-50'/>
<use x='219.869976' y='-21.190525' xlink:href='#eq1-g1-52'/>
<use x='228.462799' y='-33.391429' xlink:href='#eq1-g4-126'/>
<use x='227.840103' y='-33.225411' xlink:href='#eq1-g0-120'/>
<use x='234.938484' y='-31.432148' xlink:href='#eq1-g3-49'/>
<use x='228.462799' y='-18.945617' xlink:href='#eq1-g4-126'/>
<use x='227.840103' y='-18.779598' xlink:href='#eq1-g0-120'/>
<use x='234.938484' y='-16.986335' xlink:href='#eq1-g3-50'/>
<use x='228.462799' y='-4.499804' xlink:href='#eq1-g4-126'/>
<use x='227.840103' y='-4.333785' xlink:href='#eq1-g0-120'/>
<use x='234.938484' y='-2.540522' xlink:href='#eq1-g3-51'/>
<use x='239.670799' y='-42.710031' xlink:href='#eq1-g1-51'/>
<use x='239.670799' y='-21.190525' xlink:href='#eq1-g1-53'/>
<use x='250.29759' y='-18.67992' xlink:href='#eq1-g4-43'/>
<use x='262.058905' y='-18.67992' xlink:href='#eq1-g0-110'/>
</g>
</svg></div>
          </div></section>
          <section class="m-doc-details" id="a471d81fcc22b706654556950931067fd"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a471d81fcc22b706654556950931067fd" class="m-doc-self">EKFUpdate</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H,
              const Eigen::VectorXd&amp; res,
              const Eigen::MatrixXd&amp; R)</span></span>
            </h3>
            <p>Performs EKF update of the state (see <a href="update.html#linear-meas" class="m-doc">Linear Measurement Update</a> page)</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>H_order</td>
                  <td>Variable ordering used in the compressed Jacobian</td>
                </tr>
                <tr>
                  <td>H</td>
                  <td>Condensed Jacobian of updating measurement</td>
                </tr>
                <tr>
                  <td>res</td>
                  <td>Residual of updating measurement</td>
                </tr>
                <tr>
                  <td>R</td>
                  <td>Updating measurement covariance</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a5f19646a05e77e67d5be2da8aed19f14"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5f19646a05e77e67d5be2da8aed19f14" class="m-doc-self">set_initial_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const Eigen::MatrixXd&amp; covariance,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; order)</span></span>
            </h3>
            <p>This will set the initial covaraince of the specified state elements. Will also ensure that proper cross-covariances are inserted.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>covariance</td>
                  <td>The covariance of the system state</td>
                </tr>
                <tr>
                  <td>order</td>
                  <td>Order of the covariance matrix</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a23ec77c8411dcc7cfed64273f6882805"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static Eigen::MatrixXd ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a23ec77c8411dcc7cfed64273f6882805" class="m-doc-self">get_marginal_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; small_variables)</span></span>
            </h3>
            <p>For a given set of variables, this will this will calculate a smaller covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>small_variables</td>
                  <td>Vector of variables whose marginal covariance is desired</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Marginal covariance of the passed variables</td>
                </tr>
              </tfoot>
            </table>
<p>That only includes the ones specified with all crossterms. Thus the size of the return will be the summed dimension of all the passed variables. Normal use for this is a chi-squared check before update (where you don&#x27;t need the full covariance).</p>
          </div></section>
          <section class="m-doc-details" id="a2ac98543816e664cd85e4fa61bd165b7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static Eigen::MatrixXd ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a2ac98543816e664cd85e4fa61bd165b7" class="m-doc-self">get_full_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span></span>
            </h3>
            <p>This gets the full covariance matrix.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Covariance of current state</td>
                </tr>
              </tfoot>
            </table>
<p>Should only be used during simulation as operations on this covariance will be slow. This will return a copy, so this cannot be used to change the covariance by design. Please use the other interface functions in the <a href="classov__msckf_1_1StateHelper.html" class="m-doc">StateHelper</a> to progamatically change to covariance.</p>
          </div></section>
          <section class="m-doc-details" id="a7a6d020115f02fe783ced90b90c32287"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a7a6d020115f02fe783ced90b90c32287" class="m-doc-self">marginalize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; marg)</span></span>
            </h3>
            <p>Marginalizes a variable, properly modifying the ordering/covariances in the state.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>marg</td>
                  <td>Pointer to variable to marginalize</td>
                </tr>
              </tbody>
            </table>
<p>This function can support any Type variable out of the box. Right now the marginalization of a sub-variable/type is not supported. For example if you wanted to just marginalize the orientation of a PoseJPL, that isn&#x27;t supported. We will first remove the rows and columns corresponding to the type (i.e. do the marginalization). After we update all the type ids so that they take into account that the covariance has shrunk in parts of it.</p>
          </div></section>
          <section class="m-doc-details" id="a3aecb942a1d9bb7dec915fdad303acc8"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a3aecb942a1d9bb7dec915fdad303acc8" class="m-doc-self">clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; variable_to_clone)</span></span>
            </h3>
            <p>Clones &quot;variable to clone&quot; and places it at end of covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>variable_to_clone</td>
                  <td>Pointer to variable that will be cloned</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a58ed364529ae3802a7110edf3ac4dbbb"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static bool ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a58ed364529ae3802a7110edf3ac4dbbb" class="m-doc-self">initialize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; H_order,
              Eigen::MatrixXd&amp; H_R,
              Eigen::MatrixXd&amp; H_L,
              Eigen::MatrixXd&amp; R,
              Eigen::VectorXd&amp; res,
              double chi_2_mult)</span></span>
            </h3>
            <p>Initializes new variable into covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>new_variable</td>
                  <td>Pointer to variable to be initialized</td>
                </tr>
                <tr>
                  <td>H_order</td>
                  <td>Vector of pointers in order they are contained in the condensed state Jacobian</td>
                </tr>
                <tr>
                  <td>H_R</td>
                  <td>Jacobian of initializing measurements wrt variables in H_order</td>
                </tr>
                <tr>
                  <td>H_L</td>
                  <td>Jacobian of initializing measurements wrt new variable</td>
                </tr>
                <tr>
                  <td>R</td>
                  <td>Covariance of initializing measurements (isotropic)</td>
                </tr>
                <tr>
                  <td>res</td>
                  <td>Residual of initializing measurements</td>
                </tr>
                <tr>
                  <td>chi_2_mult</td>
                  <td>Value we should multiply the chi2 threshold by (larger means it will be accepted more measurements)</td>
                </tr>
              </tbody>
            </table>
<p>Uses Givens to separate into updating and initializing systems (therefore system must be fed as isotropic). If you are not isotropic first whiten your system (TODO: we should add a helper function to do this). If your H_L Jacobian is already directly invertable, the just call the <a href="classov__msckf_1_1StateHelper.html#adb0f34932bb91d89bfd5ae72c2e693d8" class="m-doc">initialize_<wbr />invertible()</a> instead of this function. Please refer to <a href="update-delay.html" class="m-doc">Delayed Feature Initialization</a> page for detailed derivation.</p>
          </div></section>
          <section class="m-doc-details" id="adb0f34932bb91d89bfd5ae72c2e693d8"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#adb0f34932bb91d89bfd5ae72c2e693d8" class="m-doc-self">initialize_invertible</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">ov_type::<wbr />Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H_R,
              const Eigen::MatrixXd&amp; H_L,
              const Eigen::MatrixXd&amp; R,
              const Eigen::VectorXd&amp; res)</span></span>
            </h3>
            <p>Initializes new variable into covariance (H_L must be invertible)</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>new_variable</td>
                  <td>Pointer to variable to be initialized</td>
                </tr>
                <tr>
                  <td>H_order</td>
                  <td>Vector of pointers in order they are contained in the condensed state Jacobian</td>
                </tr>
                <tr>
                  <td>H_R</td>
                  <td>Jacobian of initializing measurements wrt variables in H_order</td>
                </tr>
                <tr>
                  <td>H_L</td>
                  <td>Jacobian of initializing measurements wrt new variable (needs to be invertible)</td>
                </tr>
                <tr>
                  <td>R</td>
                  <td>Covariance of initializing measurements</td>
                </tr>
                <tr>
                  <td>res</td>
                  <td>Residual of initializing measurements</td>
                </tr>
              </tbody>
            </table>
<p>Please refer to <a href="update-delay.html" class="m-doc">Delayed Feature Initialization</a> page for detailed derivation. This is just the update assuming that H_L is invertable (and thus square) and isotropic noise.</p>
          </div></section>
          <section class="m-doc-details" id="ade3a86a89f15cc6e03a6430fd1dee694"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ade3a86a89f15cc6e03a6430fd1dee694" class="m-doc-self">augment_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              Eigen::Matrix&lt;double, 3, 1&gt; last_w)</span></span>
            </h3>
            <p>Augment the state with a stochastic copy of the current IMU pose.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>last_w</td>
                  <td>The estimated angular velocity at cloning time (used to estimate imu-cam time offset)</td>
                </tr>
              </tbody>
            </table>
<p>After propagation, normally we augment the state with an new clone that is at the new update timestep. This augmentation clones the IMU pose and adds it to our state&#x27;s clone map. If we are doing time offset calibration we also make our cloning a function of the time offset. Time offset logic is based on Li and Mourikis <a href="citelist.html#CITEREF_Li2014IJRR" class="m-doc">[28]</a>.</p><p>We can write the current clone at the true imu base clock time as the follow:</p><div class="m-math"><svg style="width: 15.613em; height: 5.300em;" viewBox="119.876498 -50.875471 149.882391 50.875471">
<title>
\begin{align*} {}^{I_{t+t_d}}_G\bar{q} &amp;= \begin{bmatrix}\frac{1}{2} {}^{I_{t+\hat{t}_d}}\boldsymbol\omega \tilde{t}_d \\ 1\end{bmatrix}\otimes{}^{I_{t+\hat{t}_d}}_G\bar{q} \\ {}^G\mathbf{p}_{I_{t+t_d}} &amp;= {}^G\mathbf{p}_{I_{t+\hat{t}_d}} + {}^G\mathbf{v}_{I_{t+\hat{t}_d}}\tilde{t}_d \end{align*}
</title>
<defs>
<path id='eq2-g3-10' d='M8.631631-2.988792C8.631631-5.188543 6.838356-6.969863 4.65056-6.969863C2.426899-6.969863 .657534-5.164633 .657534-2.988792C.657534-.789041 2.450809 .992279 4.638605 .992279C6.862267 .992279 8.631631-.812951 8.631631-2.988792ZM2.271482-5.559153C2.247572-5.583064 2.163885-5.66675 2.163885-5.69066C2.163885-5.738481 3.132254-6.670984 4.638605-6.670984C5.057036-6.670984 6.156912-6.611208 7.137235-5.69066L4.65056-3.19203L2.271482-5.559153ZM1.924782-.490162C1.195517-1.303113 .956413-2.223661 .956413-2.988792C.956413-3.90934 1.303113-4.782067 1.924782-5.487422L4.423412-2.988792L1.924782-.490162ZM7.352428-5.487422C7.926276-4.877709 8.332752-3.969116 8.332752-2.988792C8.332752-2.068244 7.986052-1.195517 7.364384-.490162L4.865753-2.988792L7.352428-5.487422ZM7.017684-.418431C7.041594-.394521 7.12528-.310834 7.12528-.286924C7.12528-.239103 6.156912 .6934 4.65056 .6934C4.23213 .6934 3.132254 .633624 2.15193-.286924L4.638605-2.785554L7.017684-.418431Z'/>
<path id='eq2-g0-33' d='M4.327771-1.673724C4.62665-2.223661 4.794022-2.809465 4.794022-3.012702C4.794022-3.275716 4.65056-3.53873 4.339726-3.53873C3.598506-3.53873 3.514819-2.271482 3.502864-1.948692C3.490909-1.769365 3.478954-1.75741 3.466999-1.745455C3.287671-1.566127 2.773599-1.219427 2.139975-1.219427C1.350934-1.219427 .896638-1.733499 .896638-2.402989C.896638-2.773599 1.111831-3.670237 1.936737-4.794022C2.044334-4.925529 2.068244-4.961395 2.068244-5.057036C2.068244-5.200498 1.948692-5.308095 1.817186-5.308095C1.697634-5.308095 1.625903-5.236364 1.613948-5.236364C1.554172-5.176588 .263014-3.610461 .263014-1.900872C.263014-.6934 .872727 .095641 1.888917 .095641C2.737733 .095641 3.407223-.478207 3.670237-.765131C3.825654-.406476 4.172354 .095641 4.961395 .095641C5.989539 .095641 6.910087-.657534 7.436115-1.470486C8.16538-2.606227 8.272976-4.136488 8.272976-4.303861C8.272976-5.224408 7.723039-5.415691 7.47198-5.415691C7.017684-5.415691 6.563387-4.937484 6.563387-4.507098C6.563387-4.196264 6.790535-4.052802 6.910087-3.957161C7.220922-3.753923 7.483935-3.466999 7.483935-3.084433C7.483935-2.295392 6.455791-1.219427 5.212453-1.219427C4.865753-1.219427 4.542964-1.315068 4.327771-1.673724Z'/>
<path id='eq2-g8-49' d='M2.502615-5.076961C2.502615-5.292154 2.486675-5.300125 2.271482-5.300125C1.944707-4.98132 1.522291-4.790037 .765131-4.790037V-4.527024C.980324-4.527024 1.41071-4.527024 1.872976-4.742217V-.653549C1.872976-.358655 1.849066-.263014 1.091905-.263014H.812951V0C1.139726-.02391 1.825156-.02391 2.183811-.02391S3.235866-.02391 3.56264 0V-.263014H3.283686C2.526526-.263014 2.502615-.358655 2.502615-.653549V-5.076961Z'/>
<path id='eq2-g8-50' d='M2.247572-1.625903C2.375093-1.745455 2.709838-2.008468 2.83736-2.12005C3.331507-2.574346 3.801743-3.012702 3.801743-3.737983C3.801743-4.686426 3.004732-5.300125 2.008468-5.300125C1.052055-5.300125 .422416-4.574844 .422416-3.865504C.422416-3.474969 .73325-3.419178 .844832-3.419178C1.012204-3.419178 1.259278-3.53873 1.259278-3.841594C1.259278-4.25604 .860772-4.25604 .765131-4.25604C.996264-4.837858 1.530262-5.037111 1.920797-5.037111C2.662017-5.037111 3.044583-4.407472 3.044583-3.737983C3.044583-2.909091 2.462765-2.303362 1.522291-1.338979L.518057-.302864C.422416-.215193 .422416-.199253 .422416 0H3.57061L3.801743-1.42665H3.55467C3.53076-1.267248 3.466999-.868742 3.371357-.71731C3.323537-.653549 2.717808-.653549 2.590286-.653549H1.171606L2.247572-1.625903Z'/>
<path id='eq2-g2-20' d='M2.988792 28.202242H6.133001V27.544707H3.646326V.179328H6.133001V-.478207H2.988792V28.202242Z'/>
<path id='eq2-g2-21' d='M2.654047 27.544707H.167372V28.202242H3.311582V-.478207H.167372V.179328H2.654047V27.544707Z'/>
<path id='eq2-g6-113' d='M5.272229-5.152677C5.272229-5.212453 5.224408-5.260274 5.164633-5.260274C5.068991-5.260274 4.60274-4.829888 4.375592-4.411457C4.160399-4.94944 3.789788-5.272229 3.275716-5.272229C1.924782-5.272229 .466252-3.526775 .466252-1.75741C.466252-.573848 1.159651 .119552 1.972603 .119552C2.606227 .119552 3.132254-.358655 3.383313-.633624L3.395268-.621669L2.940971 1.171606L2.833375 1.601993C2.725778 1.960648 2.546451 1.960648 1.984558 1.972603C1.853051 1.972603 1.733499 1.972603 1.733499 2.199751C1.733499 2.283437 1.80523 2.319303 1.888917 2.319303C2.056289 2.319303 2.271482 2.295392 2.438854 2.295392H3.658281C3.837609 2.295392 4.040847 2.319303 4.220174 2.319303C4.291905 2.319303 4.435367 2.319303 4.435367 2.092154C4.435367 1.972603 4.339726 1.972603 4.160399 1.972603C3.598506 1.972603 3.56264 1.888917 3.56264 1.793275C3.56264 1.733499 3.574595 1.721544 3.610461 1.566127L5.272229-5.152677ZM3.58655-1.422665C3.526775-1.219427 3.526775-1.195517 3.359402-.968369C3.096389-.633624 2.570361-.119552 2.008468-.119552C1.518306-.119552 1.243337-.561893 1.243337-1.267248C1.243337-1.924782 1.613948-3.263761 1.841096-3.765878C2.247572-4.60274 2.809465-5.033126 3.275716-5.033126C4.064757-5.033126 4.220174-4.052802 4.220174-3.957161C4.220174-3.945205 4.184309-3.789788 4.172354-3.765878L3.58655-1.422665Z'/>
<path id='eq2-g6-116' d='M2.402989-4.805978H3.502864C3.730012-4.805978 3.849564-4.805978 3.849564-5.021171C3.849564-5.152677 3.777833-5.152677 3.53873-5.152677H2.486675L2.929016-6.898132C2.976837-7.065504 2.976837-7.089415 2.976837-7.173101C2.976837-7.364384 2.82142-7.47198 2.666002-7.47198C2.570361-7.47198 2.295392-7.436115 2.199751-7.053549L1.733499-5.152677H.609714C.37061-5.152677 .263014-5.152677 .263014-4.925529C.263014-4.805978 .3467-4.805978 .573848-4.805978H1.637858L.848817-1.649813C.753176-1.231382 .71731-1.111831 .71731-.956413C.71731-.394521 1.111831 .119552 1.78132 .119552C2.988792 .119552 3.634371-1.625903 3.634371-1.709589C3.634371-1.78132 3.58655-1.817186 3.514819-1.817186C3.490909-1.817186 3.443088-1.817186 3.419178-1.769365C3.407223-1.75741 3.395268-1.745455 3.311582-1.554172C3.060523-.956413 2.510585-.119552 1.817186-.119552C1.458531-.119552 1.43462-.418431 1.43462-.681445C1.43462-.6934 1.43462-.920548 1.470486-1.06401L2.402989-4.805978Z'/>
<path id='eq2-g9-22' d='M5.033126-6.659029V-7.005729H.812951V-6.659029H5.033126Z'/>
<path id='eq2-g9-43' d='M4.770112-2.761644H8.069738C8.237111-2.761644 8.452304-2.761644 8.452304-2.976837C8.452304-3.203985 8.249066-3.203985 8.069738-3.203985H4.770112V-6.503611C4.770112-6.670984 4.770112-6.886177 4.554919-6.886177C4.327771-6.886177 4.327771-6.682939 4.327771-6.503611V-3.203985H1.028144C.860772-3.203985 .645579-3.203985 .645579-2.988792C.645579-2.761644 .848817-2.761644 1.028144-2.761644H4.327771V.537983C4.327771 .705355 4.327771 .920548 4.542964 .920548C4.770112 .920548 4.770112 .71731 4.770112 .537983V-2.761644Z'/>
<path id='eq2-g9-49' d='M3.443088-7.663263C3.443088-7.938232 3.443088-7.950187 3.203985-7.950187C2.917061-7.627397 2.319303-7.185056 1.08792-7.185056V-6.838356C1.362889-6.838356 1.960648-6.838356 2.618182-7.149191V-.920548C2.618182-.490162 2.582316-.3467 1.530262-.3467H1.159651V0C1.482441-.02391 2.642092-.02391 3.036613-.02391S4.578829-.02391 4.901619 0V-.3467H4.531009C3.478954-.3467 3.443088-.490162 3.443088-.920548V-7.663263Z'/>
<path id='eq2-g9-61' d='M8.069738-3.873474C8.237111-3.873474 8.452304-3.873474 8.452304-4.088667C8.452304-4.315816 8.249066-4.315816 8.069738-4.315816H1.028144C.860772-4.315816 .645579-4.315816 .645579-4.100623C.645579-3.873474 .848817-3.873474 1.028144-3.873474H8.069738ZM8.069738-1.649813C8.237111-1.649813 8.452304-1.649813 8.452304-1.865006C8.452304-2.092154 8.249066-2.092154 8.069738-2.092154H1.028144C.860772-2.092154 .645579-2.092154 .645579-1.876961C.645579-1.649813 .848817-1.649813 1.028144-1.649813H8.069738Z'/>
<path id='eq2-g9-126' d='M4.698381-7.938232C4.351681-7.591532 4.100623-7.352428 3.718057-7.352428C3.53873-7.352428 3.371357-7.388294 3.000747-7.639352C2.761644-7.782814 2.52254-7.938232 2.247572-7.938232C1.80523-7.938232 1.542217-7.639352 .980324-7.017684L1.147696-6.850311C1.494396-7.197011 1.745455-7.436115 2.12802-7.436115C2.307347-7.436115 2.47472-7.400249 2.84533-7.149191C3.084433-7.005729 3.323537-6.850311 3.598506-6.850311C4.040847-6.850311 4.303861-7.149191 4.865753-7.770859L4.698381-7.938232Z'/>
<path id='eq2-g4-100' d='M3.616438-3.969116C3.622416-3.993026 3.634371-4.028892 3.634371-4.05878C3.634371-4.154421 3.514819-4.148443 3.443088-4.142466L2.773599-4.088667C2.67198-4.08269 2.594271-4.076712 2.594271-3.939228C2.594271-3.843587 2.67198-3.843587 2.761644-3.843587C2.940971-3.843587 2.982814-3.831631 3.060523-3.801743C3.054545-3.71208 3.054545-3.700125 3.036613-3.622416C2.911083-3.108344 2.815442-2.707846 2.69589-2.27746C2.612204-2.414944 2.408966-2.636115 2.038356-2.636115C1.273225-2.636115 .448319-1.835118 .448319-.956413C.448319-.310834 .902615 .059776 1.41071 .059776C1.811208 .059776 2.15193-.215193 2.30137-.364633C2.414944 .011955 2.815442 .059776 2.946949 .059776C3.162142 .059776 3.317559-.059776 3.431133-.245081C3.580573-.484184 3.664259-.830884 3.664259-.860772C3.664259-.872727 3.658281-.944458 3.550685-.944458C3.461021-.944458 3.449066-.902615 3.425156-.806974C3.329514-.442341 3.203985-.137484 2.970859-.137484C2.767621-.137484 2.749689-.352677 2.749689-.442341C2.749689-.52005 2.749689-.537983 2.779577-.645579L3.616438-3.969116ZM2.32528-.783064C2.295392-.675467 2.295392-.663512 2.211706-.573848C1.882939-.203238 1.578082-.137484 1.428643-.137484C1.189539-.137484 .956413-.298879 .956413-.723288C.956413-.968369 1.081943-1.554172 1.273225-1.894894C1.452553-2.217684 1.75741-2.438854 2.044334-2.438854C2.492653-2.438854 2.606227-1.966625 2.606227-1.924782L2.588294-1.841096L2.32528-.783064Z'/>
<path id='eq2-g4-116' d='M1.60797-2.337235H2.259527C2.379078-2.337235 2.462765-2.337235 2.462765-2.486675C2.462765-2.576339 2.385056-2.576339 2.27746-2.576339H1.667746L1.876961-3.401245C1.900872-3.490909 1.900872-3.526775 1.900872-3.532752C1.900872-3.676214 1.787298-3.73599 1.691656-3.73599C1.619925-3.73599 1.464508-3.694147 1.41071-3.502864L1.177584-2.576339H.532005C.406476-2.576339 .400498-2.570361 .376588-2.552428C.3467-2.528518 .32279-2.450809 .32279-2.420922C.340722-2.337235 .394521-2.337235 .514072-2.337235H1.117808L.765131-.926526C.729265-.789041 .681445-.585803 .681445-.514072C.681445-.167372 .992279 .059776 1.356912 .059776C2.044334 .059776 2.450809-.759153 2.450809-.860772C2.450809-.878705 2.438854-.944458 2.337235-.944458C2.259527-.944458 2.247572-.91457 2.217684-.842839C2.014446-.394521 1.673724-.137484 1.380822-.137484C1.159651-.137484 1.153674-.358655 1.153674-.436364C1.153674-.52005 1.153674-.532005 1.183562-.645579L1.60797-2.337235Z'/>
<path id='eq2-g1-112' d='M3.371357 1.80523H2.546451V-.490162C2.84533-.227148 3.371357 .071731 4.088667 .071731C5.726526 .071731 7.005729-.920548 7.005729-2.666002C7.005729-4.315816 5.893898-5.379826 4.27995-5.379826C3.574595-5.379826 2.964882-5.140722 2.486675-4.758157V-5.379826L.418431-5.284184V-4.770112C1.159651-4.770112 1.243337-4.770112 1.243337-4.303861V1.80523H.418431V2.319303C.6934 2.295392 1.554172 2.295392 1.888917 2.295392S3.096389 2.295392 3.371357 2.319303V1.80523ZM2.546451-4.184309C2.988792-4.758157 3.622416-4.94944 4.088667-4.94944C4.865753-4.94944 5.571108-4.244085 5.571108-2.666002C5.571108-.932503 4.710336-.32279 3.945205-.32279C3.431133-.32279 2.917061-.585803 2.546451-1.147696V-4.184309Z'/>
<path id='eq2-g1-118' d='M5.917808-4.519054C6.001494-4.698381 6.049315-4.794022 6.802491-4.794022V-5.308095C6.372105-5.284184 6.348194-5.284184 5.858032-5.284184C5.535243-5.284184 5.511333-5.284184 4.829888-5.308095V-4.794022C5.152677-4.794022 5.415691-4.734247 5.415691-4.65056C5.415691-4.638605 5.415691-4.62665 5.355915-4.507098L3.957161-1.43462L2.414944-4.794022H3.072478V-5.308095C2.797509-5.284184 1.960648-5.284184 1.637858-5.284184C1.291158-5.284184 .597758-5.284184 .286924-5.308095V-4.794022H1.0401L3.144209-.227148C3.251806 0 3.275716 .059776 3.550685 .059776C3.741968 .059776 3.837609 .035866 3.945205-.203238L5.917808-4.519054Z'/>
<path id='eq2-g7-43' d='M2.946949-1.338979H4.877709C4.961395-1.338979 5.110834-1.338979 5.110834-1.494396S4.961395-1.649813 4.877709-1.649813H2.946949V-3.58655C2.946949-3.670237 2.946949-3.819676 2.791532-3.819676S2.636115-3.670237 2.636115-3.58655V-1.649813H.705355C.621669-1.649813 .472229-1.649813 .472229-1.494396S.621669-1.338979 .705355-1.338979H2.636115V.597758C2.636115 .681445 2.636115 .830884 2.791532 .830884S2.946949 .681445 2.946949 .597758V-1.338979Z'/>
<path id='eq2-g7-94' d='M1.823163-4.148443L.89066-3.353425L1.022167-3.180075L1.823163-3.771856L2.624159-3.180075L2.755666-3.353425L1.823163-4.148443Z'/>
<path id='eq2-g5-71' d='M6.352179-5.395766C6.360149-5.427646 6.37609-5.475467 6.37609-5.515318C6.37609-5.571108 6.328269-5.610959 6.272478-5.610959S6.192777-5.587049 6.129016-5.515318L5.571108-4.901619C5.204483-5.411706 4.686426-5.610959 4.144458-5.610959C2.279452-5.610959 .422416-3.889415 .422416-2.064259C.422416-.73325 1.41071 .167372 2.765629 .167372C3.626401 .167372 4.26401-.143462 4.558904-.486177C4.654545-.231133 4.845828-.00797 4.925529-.00797C4.95741-.00797 4.99726-.02391 5.0132-.055791C5.061021-.191283 5.252304-1.004234 5.308095-1.227397C5.379826-1.546202 5.435616-1.769365 5.483437-1.833126C5.555168-1.928767 5.7066-1.936737 5.945704-1.936737C5.985554-1.936737 6.105106-1.936737 6.105106-2.080199C6.105106-2.1599 6.049315-2.199751 5.985554-2.199751C5.929763-2.199751 5.834122-2.175841 5.061021-2.175841C4.861768-2.175841 4.590785-2.175841 4.471233-2.183811S4.032877-2.199751 3.913325-2.199751C3.865504-2.199751 3.745953-2.199751 3.745953-2.048319C3.745953-1.936737 3.833624-1.936737 4.040847-1.936737C4.208219-1.936737 4.511083-1.936737 4.702366-1.865006C4.710336-1.849066 4.718306-1.801245 4.718306-1.769365C4.718306-1.729514 4.670486-1.554172 4.646575-1.45056C4.598755-1.243337 4.511083-.908593 4.479203-.828892C4.224159-.294894 3.451059-.095641 2.901121-.095641C2.11208-.095641 1.187547-.510087 1.187547-1.809215C1.187547-2.470735 1.458531-3.618431 2.1599-4.383562C2.925031-5.212453 3.785803-5.347945 4.200249-5.347945C5.172603-5.347945 5.618929-4.582814 5.618929-3.777833C5.618929-3.666252 5.587049-3.52279 5.587049-3.427148C5.587049-3.323537 5.69066-3.323537 5.72254-3.323537C5.826152-3.323537 5.842092-3.355417 5.873973-3.498879L6.352179-5.395766Z'/>
<path id='eq2-g5-73' d='M3.092403-4.821918C3.164134-5.100872 3.180075-5.180573 3.777833-5.180573C3.961146-5.180573 4.056787-5.180573 4.056787-5.332005C4.056787-5.339975 4.048817-5.443587 3.921295-5.443587C3.801743-5.443587 3.55467-5.427646 3.427148-5.419676H2.327273C2.215691-5.427646 1.928767-5.443587 1.817186-5.443587C1.785305-5.443587 1.657783-5.443587 1.657783-5.292154C1.657783-5.180573 1.753425-5.180573 1.912827-5.180573C2.414944-5.180573 2.414944-5.132752 2.414944-5.037111C2.414944-5.021171 2.414944-4.98132 2.383064-4.853798L1.323039-.629639C1.251308-.342715 1.227397-.263014 .637609-.263014C.446326-.263014 .358655-.263014 .358655-.111582C.358655-.071731 .390535 0 .486177 0C.597758 0 .860772-.01594 .980324-.02391H2.088169C2.199751-.01594 2.486675 0 2.598257 0C2.646077 0 2.757659 0 2.757659-.151432C2.757659-.263014 2.662017-.263014 2.494645-.263014C2.375093-.263014 2.327273-.263014 2.191781-.278954S1.992528-.302864 1.992528-.390535C1.992528-.430386 2.000498-.430386 2.024408-.541968L3.092403-4.821918Z'/>
<path id='eq2-g5-100' d='M4.28792-5.292154C4.29589-5.308095 4.319801-5.411706 4.319801-5.419676C4.319801-5.459527 4.28792-5.531258 4.192279-5.531258C4.160399-5.531258 3.913325-5.507347 3.730012-5.491407L3.283686-5.459527C3.108344-5.443587 3.028643-5.435616 3.028643-5.292154C3.028643-5.180573 3.140224-5.180573 3.235866-5.180573C3.618431-5.180573 3.618431-5.132752 3.618431-5.061021C3.618431-5.0132 3.55467-4.750187 3.514819-4.590785L3.124284-3.036613C3.052553-3.172105 2.82142-3.514819 2.335243-3.514819C1.3868-3.514819 .342715-2.406974 .342715-1.227397C.342715-.398506 .876712 .079701 1.490411 .079701C2.000498 .079701 2.438854-.326775 2.582316-.486177C2.725778 .063761 3.267746 .079701 3.363387 .079701C3.730012 .079701 3.913325-.223163 3.977086-.358655C4.136488-.645579 4.24807-1.107846 4.24807-1.139726C4.24807-1.187547 4.216189-1.243337 4.120548-1.243337S4.008966-1.195517 3.961146-.996264C3.849564-.557908 3.698132-.143462 3.387298-.143462C3.203985-.143462 3.132254-.294894 3.132254-.518057C3.132254-.669489 3.156164-.757161 3.180075-.860772L4.28792-5.292154ZM2.582316-.860772C2.183811-.310834 1.769365-.143462 1.514321-.143462C1.147696-.143462 .964384-.478207 .964384-.892653C.964384-1.267248 1.179577-2.12005 1.354919-2.470735C1.586052-2.956912 1.976588-3.291656 2.343213-3.291656C2.86127-3.291656 3.012702-2.709838 3.012702-2.614197C3.012702-2.582316 2.81345-1.801245 2.765629-1.594022C2.662017-1.219427 2.662017-1.203487 2.582316-.860772Z'/>
</defs>
<g id='eq2-page1'>
<use x='128.826121' y='-40.113612' xlink:href='#eq2-g5-73'/>
<use x='132.497823' y='-39.03988' xlink:href='#eq2-g4-116'/>
<use x='135.348231' y='-39.03988' xlink:href='#eq2-g7-43'/>
<use x='140.938324' y='-39.03988' xlink:href='#eq2-g4-116'/>
<use x='143.788732' y='-36.947704' xlink:href='#eq2-g4-100'/>
<use x='128.826121' y='-29.588719' xlink:href='#eq2-g5-71'/>
<use x='149.982123' y='-32.82983' xlink:href='#eq2-g9-22'/>
<use x='149.123541' y='-32.82983' xlink:href='#eq2-g6-113'/>
<use x='158.063527' y='-32.82983' xlink:href='#eq2-g9-61'/>
<use x='170.489008' y='-49.686767' xlink:href='#eq2-g2-20'/>
<use x='177.994219' y='-44.248497' xlink:href='#eq2-g8-49'/>
<rect x='177.994219' y='-42.769257' height='.478187' width='4.234183'/>
<use x='177.994219' y='-35.418739' xlink:href='#eq2-g8-50'/>
<use x='183.423916' y='-45.429234' xlink:href='#eq2-g5-73'/>
<use x='187.095617' y='-42.920378' xlink:href='#eq2-g4-116'/>
<use x='189.946026' y='-42.920378' xlink:href='#eq2-g7-43'/>
<use x='195.716016' y='-44.023389' xlink:href='#eq2-g7-94'/>
<use x='195.536118' y='-42.920378' xlink:href='#eq2-g4-116'/>
<use x='198.386527' y='-40.828202' xlink:href='#eq2-g4-100'/>
<use x='203.721336' y='-39.541371' xlink:href='#eq2-g0-33'/>
<use x='212.90835' y='-41.747393' xlink:href='#eq2-g9-126'/>
<use x='212.745767' y='-39.541371' xlink:href='#eq2-g6-116'/>
<use x='216.972927' y='-37.748108' xlink:href='#eq2-g5-100'/>
<use x='196.387053' y='-25.095558' xlink:href='#eq2-g9-49'/>
<use x='221.828376' y='-49.686767' xlink:href='#eq2-g2-21'/>
<use x='230.794737' y='-32.82983' xlink:href='#eq2-g3-10'/>
<use x='242.749898' y='-41.548736' xlink:href='#eq2-g5-73'/>
<use x='246.421599' y='-39.03988' xlink:href='#eq2-g4-116'/>
<use x='249.272008' y='-39.03988' xlink:href='#eq2-g7-43'/>
<use x='255.041998' y='-40.142891' xlink:href='#eq2-g7-94'/>
<use x='254.8621' y='-39.03988' xlink:href='#eq2-g4-116'/>
<use x='257.712508' y='-36.947704' xlink:href='#eq2-g4-100'/>
<use x='242.749898' y='-29.588719' xlink:href='#eq2-g5-71'/>
<use x='263.905899' y='-32.82983' xlink:href='#eq2-g9-22'/>
<use x='263.047317' y='-32.82983' xlink:href='#eq2-g6-113'/>
<use x='119.876498' y='-11.330481' xlink:href='#eq2-g5-71'/>
<use x='126.973298' y='-6.394295' xlink:href='#eq2-g1-112'/>
<use x='134.445278' y='-4.601032' xlink:href='#eq2-g5-73'/>
<use x='138.11698' y='-3.5273' xlink:href='#eq2-g4-116'/>
<use x='140.967388' y='-3.5273' xlink:href='#eq2-g7-43'/>
<use x='146.55748' y='-3.5273' xlink:href='#eq2-g4-116'/>
<use x='149.407889' y='-1.435124' xlink:href='#eq2-g4-100'/>
<use x='158.063527' y='-6.394295' xlink:href='#eq2-g9-61'/>
<use x='170.489008' y='-11.330481' xlink:href='#eq2-g5-71'/>
<use x='177.585808' y='-6.394295' xlink:href='#eq2-g1-112'/>
<use x='185.057788' y='-4.601032' xlink:href='#eq2-g5-73'/>
<use x='188.72949' y='-2.092176' xlink:href='#eq2-g4-116'/>
<use x='191.579898' y='-2.092176' xlink:href='#eq2-g7-43'/>
<use x='197.349888' y='-3.195187' xlink:href='#eq2-g7-94'/>
<use x='197.169991' y='-2.092176' xlink:href='#eq2-g4-116'/>
<use x='200.020399' y='0' xlink:href='#eq2-g4-100'/>
<use x='208.011871' y='-6.394295' xlink:href='#eq2-g9-43'/>
<use x='219.773186' y='-11.330481' xlink:href='#eq2-g5-71'/>
<use x='226.869986' y='-6.394295' xlink:href='#eq2-g1-118'/>
<use x='233.968368' y='-4.601032' xlink:href='#eq2-g5-73'/>
<use x='237.640069' y='-2.092176' xlink:href='#eq2-g4-116'/>
<use x='240.490478' y='-2.092176' xlink:href='#eq2-g7-43'/>
<use x='246.260468' y='-3.195187' xlink:href='#eq2-g7-94'/>
<use x='246.08057' y='-2.092176' xlink:href='#eq2-g4-116'/>
<use x='248.930978' y='0' xlink:href='#eq2-g4-100'/>
<use x='254.42837' y='-8.600317' xlink:href='#eq2-g9-126'/>
<use x='254.265787' y='-6.394295' xlink:href='#eq2-g6-116'/>
<use x='258.492947' y='-4.601032' xlink:href='#eq2-g5-100'/>
</g>
</svg></div><p>where we say that we have propagated our state up to the current estimated true imaging time for the current image, <svg class="m-math" style="width: 3.054em; height: 1.181em; vertical-align: -0.000em;" viewBox="0 -11.334099 29.321863 11.334099">
<title>
${}^{I_{t+\hat{t}_d}}\boldsymbol\omega$
</title>
<defs>
<path id='eq3-g0-33' d='M4.327771-1.673724C4.62665-2.223661 4.794022-2.809465 4.794022-3.012702C4.794022-3.275716 4.65056-3.53873 4.339726-3.53873C3.598506-3.53873 3.514819-2.271482 3.502864-1.948692C3.490909-1.769365 3.478954-1.75741 3.466999-1.745455C3.287671-1.566127 2.773599-1.219427 2.139975-1.219427C1.350934-1.219427 .896638-1.733499 .896638-2.402989C.896638-2.773599 1.111831-3.670237 1.936737-4.794022C2.044334-4.925529 2.068244-4.961395 2.068244-5.057036C2.068244-5.200498 1.948692-5.308095 1.817186-5.308095C1.697634-5.308095 1.625903-5.236364 1.613948-5.236364C1.554172-5.176588 .263014-3.610461 .263014-1.900872C.263014-.6934 .872727 .095641 1.888917 .095641C2.737733 .095641 3.407223-.478207 3.670237-.765131C3.825654-.406476 4.172354 .095641 4.961395 .095641C5.989539 .095641 6.910087-.657534 7.436115-1.470486C8.16538-2.606227 8.272976-4.136488 8.272976-4.303861C8.272976-5.224408 7.723039-5.415691 7.47198-5.415691C7.017684-5.415691 6.563387-4.937484 6.563387-4.507098C6.563387-4.196264 6.790535-4.052802 6.910087-3.957161C7.220922-3.753923 7.483935-3.466999 7.483935-3.084433C7.483935-2.295392 6.455791-1.219427 5.212453-1.219427C4.865753-1.219427 4.542964-1.315068 4.327771-1.673724Z'/>
<path id='eq3-g3-43' d='M2.946949-1.338979H4.877709C4.961395-1.338979 5.110834-1.338979 5.110834-1.494396S4.961395-1.649813 4.877709-1.649813H2.946949V-3.58655C2.946949-3.670237 2.946949-3.819676 2.791532-3.819676S2.636115-3.670237 2.636115-3.58655V-1.649813H.705355C.621669-1.649813 .472229-1.649813 .472229-1.494396S.621669-1.338979 .705355-1.338979H2.636115V.597758C2.636115 .681445 2.636115 .830884 2.791532 .830884S2.946949 .681445 2.946949 .597758V-1.338979Z'/>
<path id='eq3-g3-94' d='M1.823163-4.148443L.89066-3.353425L1.022167-3.180075L1.823163-3.771856L2.624159-3.180075L2.755666-3.353425L1.823163-4.148443Z'/>
<path id='eq3-g1-100' d='M3.616438-3.969116C3.622416-3.993026 3.634371-4.028892 3.634371-4.05878C3.634371-4.154421 3.514819-4.148443 3.443088-4.142466L2.773599-4.088667C2.67198-4.08269 2.594271-4.076712 2.594271-3.939228C2.594271-3.843587 2.67198-3.843587 2.761644-3.843587C2.940971-3.843587 2.982814-3.831631 3.060523-3.801743C3.054545-3.71208 3.054545-3.700125 3.036613-3.622416C2.911083-3.108344 2.815442-2.707846 2.69589-2.27746C2.612204-2.414944 2.408966-2.636115 2.038356-2.636115C1.273225-2.636115 .448319-1.835118 .448319-.956413C.448319-.310834 .902615 .059776 1.41071 .059776C1.811208 .059776 2.15193-.215193 2.30137-.364633C2.414944 .011955 2.815442 .059776 2.946949 .059776C3.162142 .059776 3.317559-.059776 3.431133-.245081C3.580573-.484184 3.664259-.830884 3.664259-.860772C3.664259-.872727 3.658281-.944458 3.550685-.944458C3.461021-.944458 3.449066-.902615 3.425156-.806974C3.329514-.442341 3.203985-.137484 2.970859-.137484C2.767621-.137484 2.749689-.352677 2.749689-.442341C2.749689-.52005 2.749689-.537983 2.779577-.645579L3.616438-3.969116ZM2.32528-.783064C2.295392-.675467 2.295392-.663512 2.211706-.573848C1.882939-.203238 1.578082-.137484 1.428643-.137484C1.189539-.137484 .956413-.298879 .956413-.723288C.956413-.968369 1.081943-1.554172 1.273225-1.894894C1.452553-2.217684 1.75741-2.438854 2.044334-2.438854C2.492653-2.438854 2.606227-1.966625 2.606227-1.924782L2.588294-1.841096L2.32528-.783064Z'/>
<path id='eq3-g1-116' d='M1.60797-2.337235H2.259527C2.379078-2.337235 2.462765-2.337235 2.462765-2.486675C2.462765-2.576339 2.385056-2.576339 2.27746-2.576339H1.667746L1.876961-3.401245C1.900872-3.490909 1.900872-3.526775 1.900872-3.532752C1.900872-3.676214 1.787298-3.73599 1.691656-3.73599C1.619925-3.73599 1.464508-3.694147 1.41071-3.502864L1.177584-2.576339H.532005C.406476-2.576339 .400498-2.570361 .376588-2.552428C.3467-2.528518 .32279-2.450809 .32279-2.420922C.340722-2.337235 .394521-2.337235 .514072-2.337235H1.117808L.765131-.926526C.729265-.789041 .681445-.585803 .681445-.514072C.681445-.167372 .992279 .059776 1.356912 .059776C2.044334 .059776 2.450809-.759153 2.450809-.860772C2.450809-.878705 2.438854-.944458 2.337235-.944458C2.259527-.944458 2.247572-.91457 2.217684-.842839C2.014446-.394521 1.673724-.137484 1.380822-.137484C1.159651-.137484 1.153674-.358655 1.153674-.436364C1.153674-.52005 1.153674-.532005 1.183562-.645579L1.60797-2.337235Z'/>
<path id='eq3-g2-73' d='M3.092403-4.821918C3.164134-5.100872 3.180075-5.180573 3.777833-5.180573C3.961146-5.180573 4.056787-5.180573 4.056787-5.332005C4.056787-5.339975 4.048817-5.443587 3.921295-5.443587C3.801743-5.443587 3.55467-5.427646 3.427148-5.419676H2.327273C2.215691-5.427646 1.928767-5.443587 1.817186-5.443587C1.785305-5.443587 1.657783-5.443587 1.657783-5.292154C1.657783-5.180573 1.753425-5.180573 1.912827-5.180573C2.414944-5.180573 2.414944-5.132752 2.414944-5.037111C2.414944-5.021171 2.414944-4.98132 2.383064-4.853798L1.323039-.629639C1.251308-.342715 1.227397-.263014 .637609-.263014C.446326-.263014 .358655-.263014 .358655-.111582C.358655-.071731 .390535 0 .486177 0C.597758 0 .860772-.01594 .980324-.02391H2.088169C2.199751-.01594 2.486675 0 2.598257 0C2.646077 0 2.757659 0 2.757659-.151432C2.757659-.263014 2.662017-.263014 2.494645-.263014C2.375093-.263014 2.327273-.263014 2.191781-.278954S1.992528-.302864 1.992528-.390535C1.992528-.430386 2.000498-.430386 2.024408-.541968L3.092403-4.821918Z'/>
</defs>
<g id='eq3-page1'>
<use x='0' y='-5.887863' xlink:href='#eq3-g2-73'/>
<use x='3.671702' y='-3.379007' xlink:href='#eq3-g1-116'/>
<use x='6.52211' y='-3.379007' xlink:href='#eq3-g3-43'/>
<use x='12.2921' y='-4.482018' xlink:href='#eq3-g3-94'/>
<use x='12.112203' y='-3.379007' xlink:href='#eq3-g1-116'/>
<use x='14.962611' y='-1.286831' xlink:href='#eq3-g1-100'/>
<use x='20.29742' y='0' xlink:href='#eq3-g0-33'/>
</g>
</svg> is the angular velocity at the end of propagation with biases removed. This is off by some smaller error, so to get to the true imaging time in the imu base clock, we can append some small timeoffset error. Thus the Jacobian in respect to our time offset during our cloning procedure is the following:</p><div class="m-math"><svg style="width: 9.545em; height: 6.817em;" viewBox="148.303998 -65.446531 91.636128 65.446531">
<title>
\begin{align*} \frac{\partial {}^{I_{t+t_d}}_G\tilde{\boldsymbol\theta}}{\partial \tilde{t}_d} &amp;= {}^{I_{t+\hat{t}_d}}\boldsymbol\omega \\ \frac{\partial {}^G\tilde{\mathbf{p}}_{I_{t+t_d}}}{\partial \tilde{t}_d} &amp;= {}^G\mathbf{v}_{I_{t+\hat{t}_d}} \end{align*}
</title>
<defs>
<path id='eq4-g0-18' d='M6.539477-5.858032C6.539477-7.962142 5.296139-8.392528 4.566874-8.392528C3.622416-8.392528 2.426899-7.770859 1.530262-6.144956C.920548-5.021171 .549938-3.395268 .549938-2.426899C.549938-.6934 1.458531 .095641 2.534496 .095641C3.335492 .095641 4.387547-.37061 5.212453-1.590037C6.216687-3.060523 6.539477-4.961395 6.539477-5.858032ZM2.367123-4.435367C2.534496-5.128767 2.84533-6.216687 3.203985-6.838356C3.478954-7.328518 3.969116-7.962142 4.542964-7.962142C5.045081-7.962142 5.260274-7.436115 5.260274-6.73076C5.260274-5.977584 4.99726-4.937484 4.865753-4.435367H2.367123ZM4.722291-3.861519C3.981071-.657534 2.976837-.334745 2.558406-.334745C2.391034-.334745 2.139975-.382565 1.972603-.753176C1.829141-1.075965 1.829141-1.542217 1.829141-1.554172C1.829141-2.235616 2.092154-3.347447 2.223661-3.861519H4.722291Z'/>
<path id='eq4-g0-33' d='M4.327771-1.673724C4.62665-2.223661 4.794022-2.809465 4.794022-3.012702C4.794022-3.275716 4.65056-3.53873 4.339726-3.53873C3.598506-3.53873 3.514819-2.271482 3.502864-1.948692C3.490909-1.769365 3.478954-1.75741 3.466999-1.745455C3.287671-1.566127 2.773599-1.219427 2.139975-1.219427C1.350934-1.219427 .896638-1.733499 .896638-2.402989C.896638-2.773599 1.111831-3.670237 1.936737-4.794022C2.044334-4.925529 2.068244-4.961395 2.068244-5.057036C2.068244-5.200498 1.948692-5.308095 1.817186-5.308095C1.697634-5.308095 1.625903-5.236364 1.613948-5.236364C1.554172-5.176588 .263014-3.610461 .263014-1.900872C.263014-.6934 .872727 .095641 1.888917 .095641C2.737733 .095641 3.407223-.478207 3.670237-.765131C3.825654-.406476 4.172354 .095641 4.961395 .095641C5.989539 .095641 6.910087-.657534 7.436115-1.470486C8.16538-2.606227 8.272976-4.136488 8.272976-4.303861C8.272976-5.224408 7.723039-5.415691 7.47198-5.415691C7.017684-5.415691 6.563387-4.937484 6.563387-4.507098C6.563387-4.196264 6.790535-4.052802 6.910087-3.957161C7.220922-3.753923 7.483935-3.466999 7.483935-3.084433C7.483935-2.295392 6.455791-1.219427 5.212453-1.219427C4.865753-1.219427 4.542964-1.315068 4.327771-1.673724Z'/>
<path id='eq4-g6-61' d='M8.069738-3.873474C8.237111-3.873474 8.452304-3.873474 8.452304-4.088667C8.452304-4.315816 8.249066-4.315816 8.069738-4.315816H1.028144C.860772-4.315816 .645579-4.315816 .645579-4.100623C.645579-3.873474 .848817-3.873474 1.028144-3.873474H8.069738ZM8.069738-1.649813C8.237111-1.649813 8.452304-1.649813 8.452304-1.865006C8.452304-2.092154 8.249066-2.092154 8.069738-2.092154H1.028144C.860772-2.092154 .645579-2.092154 .645579-1.876961C.645579-1.649813 .848817-1.649813 1.028144-1.649813H8.069738Z'/>
<path id='eq4-g6-126' d='M4.698381-7.938232C4.351681-7.591532 4.100623-7.352428 3.718057-7.352428C3.53873-7.352428 3.371357-7.388294 3.000747-7.639352C2.761644-7.782814 2.52254-7.938232 2.247572-7.938232C1.80523-7.938232 1.542217-7.639352 .980324-7.017684L1.147696-6.850311C1.494396-7.197011 1.745455-7.436115 2.12802-7.436115C2.307347-7.436115 2.47472-7.400249 2.84533-7.149191C3.084433-7.005729 3.323537-6.850311 3.598506-6.850311C4.040847-6.850311 4.303861-7.149191 4.865753-7.770859L4.698381-7.938232Z'/>
<path id='eq4-g5-43' d='M2.946949-1.338979H4.877709C4.961395-1.338979 5.110834-1.338979 5.110834-1.494396S4.961395-1.649813 4.877709-1.649813H2.946949V-3.58655C2.946949-3.670237 2.946949-3.819676 2.791532-3.819676S2.636115-3.670237 2.636115-3.58655V-1.649813H.705355C.621669-1.649813 .472229-1.649813 .472229-1.494396S.621669-1.338979 .705355-1.338979H2.636115V.597758C2.636115 .681445 2.636115 .830884 2.791532 .830884S2.946949 .681445 2.946949 .597758V-1.338979Z'/>
<path id='eq4-g5-94' d='M1.823163-4.148443L.89066-3.353425L1.022167-3.180075L1.823163-3.771856L2.624159-3.180075L2.755666-3.353425L1.823163-4.148443Z'/>
<path id='eq4-g2-100' d='M3.616438-3.969116C3.622416-3.993026 3.634371-4.028892 3.634371-4.05878C3.634371-4.154421 3.514819-4.148443 3.443088-4.142466L2.773599-4.088667C2.67198-4.08269 2.594271-4.076712 2.594271-3.939228C2.594271-3.843587 2.67198-3.843587 2.761644-3.843587C2.940971-3.843587 2.982814-3.831631 3.060523-3.801743C3.054545-3.71208 3.054545-3.700125 3.036613-3.622416C2.911083-3.108344 2.815442-2.707846 2.69589-2.27746C2.612204-2.414944 2.408966-2.636115 2.038356-2.636115C1.273225-2.636115 .448319-1.835118 .448319-.956413C.448319-.310834 .902615 .059776 1.41071 .059776C1.811208 .059776 2.15193-.215193 2.30137-.364633C2.414944 .011955 2.815442 .059776 2.946949 .059776C3.162142 .059776 3.317559-.059776 3.431133-.245081C3.580573-.484184 3.664259-.830884 3.664259-.860772C3.664259-.872727 3.658281-.944458 3.550685-.944458C3.461021-.944458 3.449066-.902615 3.425156-.806974C3.329514-.442341 3.203985-.137484 2.970859-.137484C2.767621-.137484 2.749689-.352677 2.749689-.442341C2.749689-.52005 2.749689-.537983 2.779577-.645579L3.616438-3.969116ZM2.32528-.783064C2.295392-.675467 2.295392-.663512 2.211706-.573848C1.882939-.203238 1.578082-.137484 1.428643-.137484C1.189539-.137484 .956413-.298879 .956413-.723288C.956413-.968369 1.081943-1.554172 1.273225-1.894894C1.452553-2.217684 1.75741-2.438854 2.044334-2.438854C2.492653-2.438854 2.606227-1.966625 2.606227-1.924782L2.588294-1.841096L2.32528-.783064Z'/>
<path id='eq4-g2-116' d='M1.60797-2.337235H2.259527C2.379078-2.337235 2.462765-2.337235 2.462765-2.486675C2.462765-2.576339 2.385056-2.576339 2.27746-2.576339H1.667746L1.876961-3.401245C1.900872-3.490909 1.900872-3.526775 1.900872-3.532752C1.900872-3.676214 1.787298-3.73599 1.691656-3.73599C1.619925-3.73599 1.464508-3.694147 1.41071-3.502864L1.177584-2.576339H.532005C.406476-2.576339 .400498-2.570361 .376588-2.552428C.3467-2.528518 .32279-2.450809 .32279-2.420922C.340722-2.337235 .394521-2.337235 .514072-2.337235H1.117808L.765131-.926526C.729265-.789041 .681445-.585803 .681445-.514072C.681445-.167372 .992279 .059776 1.356912 .059776C2.044334 .059776 2.450809-.759153 2.450809-.860772C2.450809-.878705 2.438854-.944458 2.337235-.944458C2.259527-.944458 2.247572-.91457 2.217684-.842839C2.014446-.394521 1.673724-.137484 1.380822-.137484C1.159651-.137484 1.153674-.358655 1.153674-.436364C1.153674-.52005 1.153674-.532005 1.183562-.645579L1.60797-2.337235Z'/>
<path id='eq4-g1-112' d='M3.371357 1.80523H2.546451V-.490162C2.84533-.227148 3.371357 .071731 4.088667 .071731C5.726526 .071731 7.005729-.920548 7.005729-2.666002C7.005729-4.315816 5.893898-5.379826 4.27995-5.379826C3.574595-5.379826 2.964882-5.140722 2.486675-4.758157V-5.379826L.418431-5.284184V-4.770112C1.159651-4.770112 1.243337-4.770112 1.243337-4.303861V1.80523H.418431V2.319303C.6934 2.295392 1.554172 2.295392 1.888917 2.295392S3.096389 2.295392 3.371357 2.319303V1.80523ZM2.546451-4.184309C2.988792-4.758157 3.622416-4.94944 4.088667-4.94944C4.865753-4.94944 5.571108-4.244085 5.571108-2.666002C5.571108-.932503 4.710336-.32279 3.945205-.32279C3.431133-.32279 2.917061-.585803 2.546451-1.147696V-4.184309Z'/>
<path id='eq4-g1-118' d='M5.917808-4.519054C6.001494-4.698381 6.049315-4.794022 6.802491-4.794022V-5.308095C6.372105-5.284184 6.348194-5.284184 5.858032-5.284184C5.535243-5.284184 5.511333-5.284184 4.829888-5.308095V-4.794022C5.152677-4.794022 5.415691-4.734247 5.415691-4.65056C5.415691-4.638605 5.415691-4.62665 5.355915-4.507098L3.957161-1.43462L2.414944-4.794022H3.072478V-5.308095C2.797509-5.284184 1.960648-5.284184 1.637858-5.284184C1.291158-5.284184 .597758-5.284184 .286924-5.308095V-4.794022H1.0401L3.144209-.227148C3.251806 0 3.275716 .059776 3.550685 .059776C3.741968 .059776 3.837609 .035866 3.945205-.203238L5.917808-4.519054Z'/>
<path id='eq4-g3-71' d='M6.352179-5.395766C6.360149-5.427646 6.37609-5.475467 6.37609-5.515318C6.37609-5.571108 6.328269-5.610959 6.272478-5.610959S6.192777-5.587049 6.129016-5.515318L5.571108-4.901619C5.204483-5.411706 4.686426-5.610959 4.144458-5.610959C2.279452-5.610959 .422416-3.889415 .422416-2.064259C.422416-.73325 1.41071 .167372 2.765629 .167372C3.626401 .167372 4.26401-.143462 4.558904-.486177C4.654545-.231133 4.845828-.00797 4.925529-.00797C4.95741-.00797 4.99726-.02391 5.0132-.055791C5.061021-.191283 5.252304-1.004234 5.308095-1.227397C5.379826-1.546202 5.435616-1.769365 5.483437-1.833126C5.555168-1.928767 5.7066-1.936737 5.945704-1.936737C5.985554-1.936737 6.105106-1.936737 6.105106-2.080199C6.105106-2.1599 6.049315-2.199751 5.985554-2.199751C5.929763-2.199751 5.834122-2.175841 5.061021-2.175841C4.861768-2.175841 4.590785-2.175841 4.471233-2.183811S4.032877-2.199751 3.913325-2.199751C3.865504-2.199751 3.745953-2.199751 3.745953-2.048319C3.745953-1.936737 3.833624-1.936737 4.040847-1.936737C4.208219-1.936737 4.511083-1.936737 4.702366-1.865006C4.710336-1.849066 4.718306-1.801245 4.718306-1.769365C4.718306-1.729514 4.670486-1.554172 4.646575-1.45056C4.598755-1.243337 4.511083-.908593 4.479203-.828892C4.224159-.294894 3.451059-.095641 2.901121-.095641C2.11208-.095641 1.187547-.510087 1.187547-1.809215C1.187547-2.470735 1.458531-3.618431 2.1599-4.383562C2.925031-5.212453 3.785803-5.347945 4.200249-5.347945C5.172603-5.347945 5.618929-4.582814 5.618929-3.777833C5.618929-3.666252 5.587049-3.52279 5.587049-3.427148C5.587049-3.323537 5.69066-3.323537 5.72254-3.323537C5.826152-3.323537 5.842092-3.355417 5.873973-3.498879L6.352179-5.395766Z'/>
<path id='eq4-g3-73' d='M3.092403-4.821918C3.164134-5.100872 3.180075-5.180573 3.777833-5.180573C3.961146-5.180573 4.056787-5.180573 4.056787-5.332005C4.056787-5.339975 4.048817-5.443587 3.921295-5.443587C3.801743-5.443587 3.55467-5.427646 3.427148-5.419676H2.327273C2.215691-5.427646 1.928767-5.443587 1.817186-5.443587C1.785305-5.443587 1.657783-5.443587 1.657783-5.292154C1.657783-5.180573 1.753425-5.180573 1.912827-5.180573C2.414944-5.180573 2.414944-5.132752 2.414944-5.037111C2.414944-5.021171 2.414944-4.98132 2.383064-4.853798L1.323039-.629639C1.251308-.342715 1.227397-.263014 .637609-.263014C.446326-.263014 .358655-.263014 .358655-.111582C.358655-.071731 .390535 0 .486177 0C.597758 0 .860772-.01594 .980324-.02391H2.088169C2.199751-.01594 2.486675 0 2.598257 0C2.646077 0 2.757659 0 2.757659-.151432C2.757659-.263014 2.662017-.263014 2.494645-.263014C2.375093-.263014 2.327273-.263014 2.191781-.278954S1.992528-.302864 1.992528-.390535C1.992528-.430386 2.000498-.430386 2.024408-.541968L3.092403-4.821918Z'/>
<path id='eq4-g3-100' d='M4.28792-5.292154C4.29589-5.308095 4.319801-5.411706 4.319801-5.419676C4.319801-5.459527 4.28792-5.531258 4.192279-5.531258C4.160399-5.531258 3.913325-5.507347 3.730012-5.491407L3.283686-5.459527C3.108344-5.443587 3.028643-5.435616 3.028643-5.292154C3.028643-5.180573 3.140224-5.180573 3.235866-5.180573C3.618431-5.180573 3.618431-5.132752 3.618431-5.061021C3.618431-5.0132 3.55467-4.750187 3.514819-4.590785L3.124284-3.036613C3.052553-3.172105 2.82142-3.514819 2.335243-3.514819C1.3868-3.514819 .342715-2.406974 .342715-1.227397C.342715-.398506 .876712 .079701 1.490411 .079701C2.000498 .079701 2.438854-.326775 2.582316-.486177C2.725778 .063761 3.267746 .079701 3.363387 .079701C3.730012 .079701 3.913325-.223163 3.977086-.358655C4.136488-.645579 4.24807-1.107846 4.24807-1.139726C4.24807-1.187547 4.216189-1.243337 4.120548-1.243337S4.008966-1.195517 3.961146-.996264C3.849564-.557908 3.698132-.143462 3.387298-.143462C3.203985-.143462 3.132254-.294894 3.132254-.518057C3.132254-.669489 3.156164-.757161 3.180075-.860772L4.28792-5.292154ZM2.582316-.860772C2.183811-.310834 1.769365-.143462 1.514321-.143462C1.147696-.143462 .964384-.478207 .964384-.892653C.964384-1.267248 1.179577-2.12005 1.354919-2.470735C1.586052-2.956912 1.976588-3.291656 2.343213-3.291656C2.86127-3.291656 3.012702-2.709838 3.012702-2.614197C3.012702-2.582316 2.81345-1.801245 2.765629-1.594022C2.662017-1.219427 2.662017-1.203487 2.582316-.860772Z'/>
<path id='eq4-g4-64' d='M5.427646-3.993026C5.355915-4.662516 4.937484-5.463512 3.861519-5.463512C2.175841-5.463512 .454296-3.753923 .454296-1.853051C.454296-1.123786 .956413 .251059 2.582316 .251059C5.403736 .251059 6.611208-3.861519 6.611208-5.499377C6.611208-7.220922 5.642839-8.547945 4.112578-8.547945C2.379078-8.547945 1.865006-7.029639 1.865006-6.706849C1.865006-6.599253 1.936737-6.336239 2.271482-6.336239C2.689913-6.336239 2.86924-6.718804 2.86924-6.922042C2.86924-7.292653 2.49863-7.292653 2.343213-7.292653C2.833375-8.177335 3.741968-8.261021 4.064757-8.261021C5.116812-8.261021 5.786301-7.424159 5.786301-6.085181C5.786301-5.32005 5.559153-4.435367 5.439601-3.993026H5.427646ZM2.618182-.071731C1.494396-.071731 1.303113-.956413 1.303113-1.458531C1.303113-1.984558 1.637858-3.21594 1.817186-3.658281C1.972603-4.016936 2.654047-5.224408 3.897385-5.224408C4.985305-5.224408 5.236364-4.27995 5.236364-3.634371C5.236364-2.749689 4.459278-.071731 2.618182-.071731Z'/>
<path id='eq4-g4-116' d='M2.402989-4.805978H3.502864C3.730012-4.805978 3.849564-4.805978 3.849564-5.021171C3.849564-5.152677 3.777833-5.152677 3.53873-5.152677H2.486675L2.929016-6.898132C2.976837-7.065504 2.976837-7.089415 2.976837-7.173101C2.976837-7.364384 2.82142-7.47198 2.666002-7.47198C2.570361-7.47198 2.295392-7.436115 2.199751-7.053549L1.733499-5.152677H.609714C.37061-5.152677 .263014-5.152677 .263014-4.925529C.263014-4.805978 .3467-4.805978 .573848-4.805978H1.637858L.848817-1.649813C.753176-1.231382 .71731-1.111831 .71731-.956413C.71731-.394521 1.111831 .119552 1.78132 .119552C2.988792 .119552 3.634371-1.625903 3.634371-1.709589C3.634371-1.78132 3.58655-1.817186 3.514819-1.817186C3.490909-1.817186 3.443088-1.817186 3.419178-1.769365C3.407223-1.75741 3.395268-1.745455 3.311582-1.554172C3.060523-.956413 2.510585-.119552 1.817186-.119552C1.458531-.119552 1.43462-.418431 1.43462-.681445C1.43462-.6934 1.43462-.920548 1.470486-1.06401L2.402989-4.805978Z'/>
</defs>
<g id='eq4-page1'>
<use x='155.774443' y='-52.716513' xlink:href='#eq4-g4-64'/>
<use x='162.604311' y='-60.000295' xlink:href='#eq4-g3-73'/>
<use x='166.276013' y='-58.926563' xlink:href='#eq4-g2-116'/>
<use x='169.126421' y='-58.926563' xlink:href='#eq4-g5-43'/>
<use x='174.716513' y='-58.926563' xlink:href='#eq4-g2-116'/>
<use x='177.566922' y='-56.834387' xlink:href='#eq4-g2-100'/>
<use x='162.604311' y='-49.475402' xlink:href='#eq4-g3-71'/>
<use x='183.524411' y='-55.871339' xlink:href='#eq4-g6-126'/>
<use x='182.901731' y='-52.716513' xlink:href='#eq4-g0-18'/>
<rect x='155.774443' y='-47.85664' height='.478187' width='34.225612'/>
<use x='164.931023' y='-35.803314' xlink:href='#eq4-g4-64'/>
<use x='171.923475' y='-38.009336' xlink:href='#eq4-g6-126'/>
<use x='171.760892' y='-35.803314' xlink:href='#eq4-g4-116'/>
<use x='175.988051' y='-34.010051' xlink:href='#eq4-g3-100'/>
<use x='194.516398' y='-44.628754' xlink:href='#eq4-g6-61'/>
<use x='206.941879' y='-50.516617' xlink:href='#eq4-g3-73'/>
<use x='210.61358' y='-48.007761' xlink:href='#eq4-g2-116'/>
<use x='213.463989' y='-48.007761' xlink:href='#eq4-g5-43'/>
<use x='219.233979' y='-49.110772' xlink:href='#eq4-g5-94'/>
<use x='219.054081' y='-48.007761' xlink:href='#eq4-g2-116'/>
<use x='221.90449' y='-45.915585' xlink:href='#eq4-g2-100'/>
<use x='227.239299' y='-44.628754' xlink:href='#eq4-g0-33'/>
<use x='148.303998' y='-20.240322' xlink:href='#eq4-g4-64'/>
<use x='155.133866' y='-24.578759' xlink:href='#eq4-g3-71'/>
<use x='163.040161' y='-20.406341' xlink:href='#eq4-g6-126'/>
<use x='162.230666' y='-20.240322' xlink:href='#eq4-g1-112'/>
<use x='169.702646' y='-18.447059' xlink:href='#eq4-g3-73'/>
<use x='173.374348' y='-17.373327' xlink:href='#eq4-g2-116'/>
<use x='176.224756' y='-17.373327' xlink:href='#eq4-g5-43'/>
<use x='181.814849' y='-17.373327' xlink:href='#eq4-g2-116'/>
<use x='184.665257' y='-15.281151' xlink:href='#eq4-g2-100'/>
<rect x='148.303998' y='-13.846589' height='.478187' width='41.696057'/>
<use x='161.195793' y='-1.793263' xlink:href='#eq4-g4-64'/>
<use x='168.188245' y='-3.999285' xlink:href='#eq4-g6-126'/>
<use x='168.025662' y='-1.793263' xlink:href='#eq4-g4-116'/>
<use x='172.252821' y='0' xlink:href='#eq4-g3-100'/>
<use x='194.516398' y='-10.618703' xlink:href='#eq4-g6-61'/>
<use x='206.941879' y='-15.554889' xlink:href='#eq4-g3-71'/>
<use x='214.038679' y='-10.618703' xlink:href='#eq4-g1-118'/>
<use x='221.13706' y='-8.82544' xlink:href='#eq4-g3-73'/>
<use x='224.808762' y='-6.316584' xlink:href='#eq4-g2-116'/>
<use x='227.65917' y='-6.316584' xlink:href='#eq4-g5-43'/>
<use x='233.42916' y='-7.419595' xlink:href='#eq4-g5-94'/>
<use x='233.249262' y='-6.316584' xlink:href='#eq4-g2-116'/>
<use x='236.099671' y='-4.224408' xlink:href='#eq4-g2-100'/>
</g>
</svg></div>
          </div></section>
          <section class="m-doc-details" id="a18f86e6da0bf5e7d4879f8c2f1460a27"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a18f86e6da0bf5e7d4879f8c2f1460a27" class="m-doc-self">marginalize_old_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span></span>
            </h3>
            <p>Remove the oldest clone, if we have more then the max clone count!!</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
              </tbody>
            </table>
<p>This will marginalize the clone from our covariance, and remove it from our state. This is mainly a helper function that we can call after each update. It will marginalize the clone specified by <a href="classov__msckf_1_1State.html#a36420e71ffa54625667eac2a8a345582" class="m-doc">State::<wbr />margtimestep()</a> which should return a clone timestamp.</p>
          </div></section>
          <section class="m-doc-details" id="a54f8517a288b9362f29481f650f4b959"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a54f8517a288b9362f29481f650f4b959" class="m-doc-self">marginalize_slam</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span></span>
            </h3>
            <p>Marginalize bad SLAM features.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim"></span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim"></span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Generated by <a href="https://doxygen.org/">Doxygen</a> 1.8.20 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
